"use strict";(self.webpackChunk_webdevstudios_docs=self.webpackChunk_webdevstudios_docs||[]).push([[44],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return f}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),c=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=c(e.components);return r.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=c(n),f=o,h=p["".concat(l,".").concat(f)]||p[f]||u[f]||a;return n?r.createElement(h,i(i({ref:t},d),{},{components:n})):r.createElement(h,i({ref:t},d))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=p;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var c=2;c<a;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},1606:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return d},default:function(){return p}});var r=n(7462),o=n(3366),a=(n(7294),n(3905)),i=["components"],s={title:"Architecture",sidebar_position:2},l=void 0,c={unversionedId:"frontend/overview",id:"frontend/overview",isDocsHomePage:!1,title:"Architecture",description:"This describes how information is passed to and from the frontend, through Next.js,",source:"@site/docs/frontend/overview.md",sourceDirName:"frontend",slug:"/frontend/overview",permalink:"/nextjs-wordpress-starter/docs/frontend/overview",editUrl:"https://github.com/WebDevStudios/nextjs-wordpress-starter/blob/canary/docs/frontend/overview.md",tags:[],version:"current",lastUpdatedBy:"Greg Rickaby",lastUpdatedAt:1640314133,formattedLastUpdatedAt:"12/24/2021",sidebarPosition:2,frontMatter:{title:"Architecture",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Frontend Setup",permalink:"/nextjs-wordpress-starter/docs/frontend/index"},next:{title:"Folder Structure",permalink:"/nextjs-wordpress-starter/docs/frontend/folder-structure"}},d=[{value:"Overall Architecture",id:"overall-architecture",children:[],level:2},{value:"Handling dynamic data",id:"handling-dynamic-data",children:[],level:2}],u={toc:d};function p(e){var t=e.components,n=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"This describes how information is passed to and from the frontend, through Next.js,\nback to WordPress."),(0,a.kt)("h2",{id:"overall-architecture"},"Overall Architecture"),(0,a.kt)("p",null,"Next.js, as used in this starter, is not a purely static site. Functions in\nthe ",(0,a.kt)("inlineCode",{parentName:"p"},"/public/api"),' folder are executed on the Next.js "server" where the\nfrontend is hosted, giving them access to all the environment variables\navailable to the build process.'),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"/-----------\\\n| WordPress |\n\\-----------/\n      |\n~~~~~~~~~~~~~\n      |\n/-----------\\\n|  Next.js  |\n\\-----------/\n      |\n/-----------\\\n|  Browser  |\n\\-----------/\n")),(0,a.kt)("h2",{id:"handling-dynamic-data"},"Handling dynamic data"),(0,a.kt)("p",null,"Occasionally, the browser will need to make a request for data. This includes\nloading additional posts on archive pages and posting WordPress comments.\nBecause the browser may not have access to WordPress (if WordPress is behind a\nfirewall or other authorization mechanism), any dynamic information for the\nbrowser must pass through a Next.js function."),(0,a.kt)("p",null,"Functions and methods to be executed in the browser are found in the ",(0,a.kt)("inlineCode",{parentName:"p"},"/lib/frontend"),"\nfolder. The actual endpoints are in ",(0,a.kt)("inlineCode",{parentName:"p"},"/public/api"),"."),(0,a.kt)("p",null,"The basic steps for creating a feature using dynamic data are:"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Create a ",(0,a.kt)("a",{parentName:"li",href:"https://nextjs.org/docs/api-routes/introduction"},"Next.js API Route")," that will handle the request to WordPress.\nThis page can and should use functions available to a normal Next.js page,\nincluding using functions in ",(0,a.kt)("inlineCode",{parentName:"li"},"/lib/wordpress"),"."),(0,a.kt)("li",{parentName:"ol"},"Add the new API route to ",(0,a.kt)("inlineCode",{parentName:"li"},"wpDataEndpoints")," in ",(0,a.kt)("inlineCode",{parentName:"li"},"/lib/wordpress/connector.js")),(0,a.kt)("li",{parentName:"ol"},"Create a new GraphQL query and corresponding function in\n",(0,a.kt)("inlineCode",{parentName:"li"},"/lib/frontend/wp"),". Follow the other features there as an example, particularly\nthe use of ",(0,a.kt)("inlineCode",{parentName:"li"},"@rest()")," in the GraphQL query"),(0,a.kt)("li",{parentName:"ol"},"Use this frontend function in the actual displayed page.")))}p.isMDXComponent=!0}}]);